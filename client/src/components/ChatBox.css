/* ============================================================
   COMPONENT: ChatBox
   THEME: Gallery Cream (Architectural, Sharp & Contrast)
   ============================================================ */

:root {
  --cb-bg: #FFFFFF;            /* Білий фон контейнера */
  --cb-border: #1F1F1F;        /* Чорна рамка */
  
  --cb-msg-me-bg: #1F1F1F;     /* Мої повідомлення (Чорний) */
  --cb-msg-me-text: #FFFFFF;   /* Мій текст (Білий) */
  
  --cb-msg-them-bg: #F0EEE6;   /* Їхні повідомлення (Крем) */
  --cb-msg-them-text: #1F1F1F; /* Їхній текст (Чорний) */
  --cb-msg-them-border: #1F1F1F; /* Рамка для "них" */
  
  --cb-accent: #C25E00;        /* Палена глина (акцент) */
  --cb-sys-text: #888888;      /* Системні повідомлення */
  
  --cb-font-body: 'Inter', sans-serif;
  --cb-font-tech: 'Tektur', sans-serif;
}

/* 1. Main Container */
.cb {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  min-height: 400px; /* Мінімальна висота */
  max-height: 600px;
  
  background-color: var(--cb-bg);
  border: 1px solid var(--cb-border);
  
  /* ⚠️ ГОСТРІ КУТИ */
  border-radius: 0; 
  box-shadow: 10px 10px 0 rgba(0,0,0,0.1); /* Жорстка тінь */
  overflow: hidden;
}

/* 2. Messages Area */
.cb-msgs {
  flex-grow: 1;
  padding: 20px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
  
  /* Фонова сітка для технічного вигляду (опціонально) */
  background-image: 
    linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Custom Scrollbar */
.cb-msgs::-webkit-scrollbar {
  width: 4px;
}
.cb-msgs::-webkit-scrollbar-track {
  background: #f1f1f1;
}
.cb-msgs::-webkit-scrollbar-thumb {
  background: var(--cb-border);
  border-radius: 0;
}

/* 3. Message Rows */
.cb-row {
  display: flex;
  width: 100%;
}

/* Alignments */
.cb-row.me {
  justify-content: flex-end; /* Праворуч */
}
.cb-row.them {
  justify-content: flex-start; /* Ліворуч */
}
.cb-row.sys {
  justify-content: center; /* По центру */
  margin: 10px 0;
}

/* 4. Message Bubble */
.cb-bubble {
  max-width: 80%;
  padding: 12px 16px;
  position: relative;
  border-radius: 0; /* ⚠️ ГОСТРІ КУТИ */
  
  /* Анімація появи */
  animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* --- Styles: ME (Black Block) --- */
.cb-row.me .cb-bubble {
  background-color: var(--cb-msg-me-bg);
  color: var(--cb-msg-me-text);
  /* Ефект "язичка" не робимо, робимо строгі блоки */
  border: 1px solid var(--cb-msg-me-bg); 
}

/* --- Styles: THEM (Cream Block with Border) --- */
.cb-row.them .cb-bubble {
  background-color: var(--cb-msg-them-bg);
  color: var(--cb-msg-them-text);
  border: 1px solid var(--cb-msg-them-border);
}

/* --- Styles: SYSTEM (No bubble, just text) --- */
.cb-row.sys .cb-bubble {
  background: transparent;
  padding: 0;
  max-width: 90%;
  text-align: center;
}

.cb-row.sys .cb-text {
  color: var(--cb-sys-text);
  font-size: 0.8rem;
  font-style: italic;
}

.cb-row.sys .cb-time {
  display: none; /* Час для системних не потрібен */
}

/* 5. Text & Time */
.cb-text {
  font-family: var(--cb-font-body);
  font-size: 0.95rem;
  line-height: 1.5;
  white-space: pre-wrap; /* Зберігаємо переноси */
  word-break: break-word;
}

.cb-time {
  display: block;
  margin-top: 6px;
  font-family: var(--cb-font-tech);
  font-size: 0.65rem;
  opacity: 0.7;
  text-align: right;
  letter-spacing: 0.05em;
}

/* 6. Input Area */
.cb-input {
  display: flex;
  align-items: stretch;
  border-top: 1px solid var(--cb-border);
  background-color: #fff;
  height: 50px;
}

.cb-input input {
  flex-grow: 1;
  border: none;
  padding: 0 20px;
  font-family: var(--cb-font-body);
  font-size: 0.95rem;
  outline: none;
  background: transparent;
  color: var(--cb-border);
}

.cb-input input::placeholder {
  color: #999;
  font-style: italic;
}

.cb-input input:disabled {
  background-color: #f9f9f9;
  cursor: not-allowed;
}

/* 7. Send Button */
.cb-input button {
  padding: 0 24px;
  border: none;
  border-left: 1px solid var(--cb-border); /* Розділювач */
  background-color: var(--cb-border);      /* Чорна кнопка */
  color: #fff;
  
  font-family: var(--cb-font-tech);
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.8rem;
  letter-spacing: 0.05em;
  
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 0;
}

.cb-input button:hover:not(:disabled) {
  background-color: var(--cb-accent); /* Помаранчевий при наведенні */
  color: #fff;
}

.cb-input button:disabled {
  background-color: #e0e0e0;
  color: #999;
  border-left-color: #e0e0e0;
  cursor: not-allowed;
}

/* Mobile Adaptation */
@media (max-width: 480px) {
  .cb {
    border-left: none;
    border-right: none;
    box-shadow: none;
  }
  
  .cb-bubble {
    max-width: 90%;
  }
}